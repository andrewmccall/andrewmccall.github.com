
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Can't login after Leopard Upgrade. Oh Apple, why would you do this to me?  - andrewmccall.com</title>
  <meta name="author" content="Andrew McCall">

  
  <meta name="description" content="I wanted to write something else today, but instead I&#8217;m recovering my laptop because I decided to &#8220;quickly&#8221; upgrade from Tiger to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://andrewmccall.com/blog/2008/08/01/can-t-login-after-leopard-upgrade-oh-apple-why-would-you-do-this-to-me-/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="andrewmccall.com" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">andrewmccall.com</a></h1>
  
    <h2>My stie</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:andrewmccall.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Can't Login After Leopard Upgrade. Oh Apple, Why Would You Do This to Me?</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-01T00:00:00+01:00" pubdate data-updated="true">Aug 1<span>st</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content">I wanted to write something else today, but instead I&#8217;m recovering my laptop because I decided to &#8220;quickly&#8221; upgrade from Tiger to Lepoard this morning. Everything looked to be going perfectly and I figured I&#8217;d got away without any major problems - that is until I tried to login. 

Unfortunately there is an all too common bug with upgrading a system that has a filevault user - in short it doesn&#8217;t fucking work! I&#8217;m the only user on my laptop and when I tried to log in after the upgrade all I got was an error message: 

<blockquote class="posterous_short_quote">&#8220;Your FileVault-protected home folder did not open and needs to be repaired. Click OK to repair the folder and continue logging in. Click Cancel Login to log in as a different user&#8221; </blockquote>

<strong>oh fuck</strong>. 

I&#8217;d like this part of the story to be the part where I say, it&#8217;s all ok because I had backups, but it&#8217;s not. I had my daughter in my arms and was flying one handed, she&#8217;d just dozed off for a short nap and I didn&#8217;t want to wake her up so I didn&#8217;t reach down, unplug the external drive from my desktop machine, I didn&#8217;t plug it into my laptop and I didn&#8217;t back up my files. 

<strong>oh fuck</strong>. 

I clicked OK, waited a few seconds and hoped for the best&#8230;

<blockquote class="posterous_short_quote">&#8220;Logging into the account failed because an error occurred&#8221;</blockquote>

<strong>oh fuck</strong>. 

Now it sinks in, what was meant to be a nice little morning project, upgrade my OS has turned into a total nightmare. Here are the steps to sort it out, they worked for me and hopefully will help someone else. 

<h1>Reset the root password, so you can login</h1>

Restart you machine with the install disk in the drive and hold the <strong>c</strong> key to boot from the disk. 

Select your instalation language, accept the agreements and click continue. When it&#8217;s loaded choose reset password from the utilities list. Choose your system drive and select <em>System Administrator (root)</em> from the list of users. Set a password and click save. 

<h1>Login as root</h1>

Close all the windows and quit the Mac OS X Installer, when your prompted to select a startup disk choose your hard disk. 

Now you login screen should have an option to log in as another user, pick this and use the username root and the password you set above. You should now get a new desktop from here you&#8217;ll be able to recover your files. 

<h1>Get your files</h1>

Open finder and browse to the Users folder. Find your user and in there you should find a file called <em>username</em>.sparseimage. 

I tried to back the whole file up to my external drive, but couldn&#8217;t get it to copy in either Finder or terminal.

So just double click it to mount it as a disk. You&#8217;ll be asked to type a password, it&#8217;s your user password for the account. Type it and click ok. 

Finder will start to mount the disk then stop with the following message:

[[posterous-content:rmwCBzHoHbAzHynFntja]]

You&#8217;ve got nothing to lose here, it&#8217;s mount it or lose everything so just go ahead and click Open. 

[[posterous-content:bseEujfzkIrcoDisDuIk]]

So it can&#8217;t read it properly, just click ok. You should now have a drive mounted and it has all your files in there. Time to back them all up, except they probably won&#8217;t all back up. I tried that and got some permission issues, rather then worry too much about them I ignored them and just made sure I got all my documents, pictures, music, movies and the application settings I wanted, I ignored everything else. 

I have a lot of files and this took a very long time, the lesson I&#8217;ve learned - back up more often. Ironically that&#8217;s part of the reason I wanted to upgrade, so timemachine would do this for me&#8230; but I digress. 

<h1>Recover</h1>

At this point you have a choice. You can create a new users, move files into it and move on with your upgraded system. Since I was tempted to wipe the system and start again when I considered installing the OS I chose to go that route. I rebooted, used disk utility to clean the drive and started again from fresh. 

Either way from you backups and your new user you should be able to either do a recovery and get more or less back to where you wanted to be.  

<h1>Rant</h1>

Filevault is promoted as a great security feature of the OS. I like it, I deal with the fact that my machine is somewhat slower for using it, but I feel the benefits if for any reason my laptop is lost or stolen far outweigh the inconviniences. 

I haven&#8217;t really had any problems with my mac before now and I don&#8217;t see any reason that my system should be anything but standard. Since I&#8217;m <a href="http://discussions.apple.com/thread.jspa?messageID=5881960">not the only one that has been experiencing these issues</a>, one can only assume it&#8217;s fairly widespread. 

If only I&#8217;d know, I could have saved myself hours by simply turning file vault off. I mean I took the trouble to reboot once and clean up my home directory so the OS could fully recover it&#8217;s space.

To anyone reading this contemplating an upgrade, <strong>TURN FILEVAULT OFF FIRST!</strong>

<h1>The good news</h1>

The only good to come from the whole experience is that I ended up with the clean install I kinda wanted anyway. Though not really through choice. 

Also next time I&#8217;ll be running a simple google search for &#8220;snow lepoard upgrade problems&#8221; first and hopefully timemachine means I&#8217;ll have consistent backups, before I start.
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andrew McCall</span></span>

      








  


<time datetime="2008-08-01T00:00:00+01:00" pubdate data-updated="true">Aug 1<span>st</span>, 2008</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://andrewmccall.com/blog/2008/08/01/can-t-login-after-leopard-upgrade-oh-apple-why-would-you-do-this-to-me-/" data-via="andrewmccall" data-counturl="http://andrewmccall.com/blog/2008/08/01/can-t-login-after-leopard-upgrade-oh-apple-why-would-you-do-this-to-me-/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2008/07/28/setting-subversion-up-to-work-with-contractors/" title="Previous Post: Setting subversion up to work with contractors">&laquo; Setting subversion up to work with contractors</a>
      
      
        <a class="basic-alignment right" href="/blog/2008/08/15/more-time-passes/" title="Next Post: More time passes">More time passes &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/24/octopress/">Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/11/customer-support-what-a-joke-/">Customer support, what a joke.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/23/validation-1-0-0-released-/">Validation 1.0.0 released.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/16/oembed/">oEmbed</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/15/even-more-secure-passwords-/">Even more secure passwords.</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/andrewmccall">@andrewmccall</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'andrewmccall',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("andrewmccall", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/andrewmccall" class="twitter-follow-button" data-show-count="false">Follow @andrewmccall</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Andrew McCall -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
